<script type="text/javascript" charset="utf-8">

function bindPostAttachmentHandler(fid) {
    var this_form = '#attachment_form_wrapper_' + fid + ' form';
    var options = {
        // target element to be updated with server response
        target: this_form,
        clearForm: true, // clear all form fields after successful submit
    };

    // bind to the form's submit event
    $(this_form).submit(function() {
        // inside event callbacks 'this' is the DOM element so we first
        // wrap it in a jQuery object and then invoke ajaxSubmit
        $(this).ajaxSubmit(options);

        // return false to prevent standard browser submit and page navigation
        return false;
    });
}

function deleteAttachmentHandler(fid) {
    var this_form = '#del_attachment_' + fid;
    var agree = confirm("Do you want to delete this attachment?");
    var options = {
        // target element to be updated with server response
        target: $(this_form).parent().parent(),
        clearForm: true, // clear all form fields after successful submit
    };

    if (agree){
        // bind to the form's submit event
        $(this_form).submit(function() {
            // inside event callbacks 'this' is the DOM element so we first
            // wrap it in a jQuery object and then invoke ajaxSubmit
            $(this).ajaxSubmit(options);
            
            // return false to prevent standard browser submit and page navigation
            return false;
        });
    }
    else
        return false;
}

</script>